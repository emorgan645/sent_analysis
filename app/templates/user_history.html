{% extends "base.html" %} {% import 'bootstrap/wtf.html' as wtf %} {% block app_content %}
<!DOCTYPE html>
<html>
    <body>
        <div class="container">
            {% if rows|length == 0 %}
            <h1>Nothing here to display :(</h1>
            <a href="{{ url_for('index') }}">Go back</a>
            {% else %}
            <h1>User History</h1>
            <div class="container">
                <button onclick="exportTableToCSV('user_results.csv')" class="btn btn-secondary">Export Table To CSV
                    File</button>
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">Name</th>
                            <th scope="col">Username</th>
                            <th scope="col">Desc</th>
                            <th scope="col">Status total</th>
                            <th scope="col">Friends</th>
                            <th scope="col">Followers</th>
                            <th scope="col">Account age (days)</th>
                            <th scope="col">Daily tweet avg</th>
                            <th scope="col">Sentiment rating</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for row in rows %}
                        <tr>
                            <th scope="row">{{loop.index}}</th>
                            <td>{{row[1]}}</td>
                            <td><a href="http://twitter.com/{{row[2]}}" target="_blank">@{{ row[2] }}</a></td>
                            <td>{{row[3]}}</td>
                            <td>{{row[4]}}</td>
                            <td>{{row[5]}}</td>
                            <td>{{row[6]}}</td>
                            <td>{{row[7]}}</td>
                            <td>{{row[8]}}</td>
                            {% if row[9]== None %}
                            <td>Users tweets are protected</td>
                            {% else %}
                            <td>{{row[9]}}%</td>
                            {% endif %} {% if row[9] is defined and row[9]
                            < 50 %} <td>
                                <a href="https://twitter.com/messages/compose?recipient_id={{ row[0] }}&text=Hi @{{ row[2] }}, based on your recent tweets it is advised that you seek professional help" class="twitter-dm-button" data-screen-name="@{{ row[1] }}" type="button" role="button"
                                    target="_blank" data-size="large" data-show-count="false"></a>
                                </td>
                                {% elif row[9] is defined and row[9] >= 50 %}
                                <td>
                                    <a href="https://twitter.com/messages/compose?recipient_id={{ row[0] }}&text=Hi @{{ row[2] }}, here is number for sams" class="twitter-dm-button" data-screen-name="@{{ row[1] }}" type="button" role="button" target="_blank" data-size="large" data-show-count="false"></a>
                                </td>
                                {% elif row[9] is defined and row[9] >= 50 %}
                                <td>
                                    <a href="https://twitter.com/messages/compose?recipient_id={{ row[0] }}&text=Hi @{{ row[2] }}, here is number for sams" class="twitter-dm-button" data-screen-name="@{{ row[1] }}" type="button" role="button" target="_blank" data-size="large" data-show-count="false"></a>
                                </td>
                                {% elif row[9] is defined and row[9] >= 50 %}
                                <td>
                                    <a href="https://twitter.com/messages/compose?recipient_id={{ row[0] }}&text=Hi @{{ row[2] }}, here is number for sams" class="twitter-dm-button" data-screen-name="@{{ row[1] }}" type="button" role="button" target="_blank" data-size="large" data-show-count="false"></a>
                                </td>
                                {% elif row[9] is defined and row[9] >= 50 %}
                                <td>
                                    <a href="https://twitter.com/messages/compose?recipient_id={{ row[0] }}&text=Hi @{{ row[2] }}, here is number for sams" class="twitter-dm-button" data-screen-name="@{{ row[1] }}" type="button" role="button" target="_blank" data-size="large" data-show-count="false"></a>
                                </td>
                                {% else %}
                                <td>
                                </td>
                                {% endif %}
                                <script async src="https://platform.twitter.com/widgets.js " charset="utf-8 "></script>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <button onclick="exportTableToCSV('users.csv')">Export Table To CSV File</button>
                <a href="{{ url_for('index') }}">Go Back to Home</a>
            </div>
            {% endif %}
        </div>
    </body>
</html>

{% endblock %}